<script>
  function getParamEverywhere(name) {
    // 1) Aus der Query (?a=1&b=2)
    const q = new URLSearchParams(location.search);
    if (q.has(name)) return q.get(name);

    // 2) Aus dem Hash (#seite?submitted=1 ODER #seite&submitted=1)
    const hash = location.hash || '';
    const qm = hash.indexOf('?');
    if (qm >= 0) {
      const hp = new URLSearchParams(hash.slice(qm + 1));
      if (hp.has(name)) return hp.get(name);
    }
    const m = hash.match(new RegExp(`[?&]${name}=([^&#]+)`, 'i'));
    return m ? decodeURIComponent(m[1]) : null;
  }

  (function showSubmissionToastIfNeeded(){
    const submitted = getParamEverywhere('submitted');
    if (submitted === '1') {
      const toast = document.createElement('div');
      toast.style.cssText = 'position:fixed;left:50%;transform:translateX(-50%);bottom:88px;z-index:999999;background:#10b981;color:#fff;padding:10px 14px;border-radius:10px;font:600 14px/1.2 system-ui;box-shadow:0 8px 20px rgba(0,0,0,.12)';
      toast.textContent = 'Danke! Deine Verfügbarkeiten wurden gespeichert.';
      document.body.appendChild(toast);
      setTimeout(()=>toast.remove(), 3500);

      // Optional: URL aufräumen, damit der Toast nicht erneut erscheint
      try {
        const url = new URL(location.href);
        url.searchParams.delete('submitted');
        url.hash = url.hash.replace(/[?&]submitted=1\b/i, '');
        history.replaceState(null, '', url.toString());
      } catch {}
    }
  })();
</script>
